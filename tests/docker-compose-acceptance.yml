version: '2.1'
services:

    acceptance:
        image: mendersoftware/mender-test-containers:acceptance-testing
        networks:
            - mender
        volumes:
            - ".:/testing"
        depends_on:
            - mender-deviceconnect
            - mmock

    mender-deviceconnect:
      image: mendersoftware/deviceconnect:prtest
      networks:
        mender:
          aliases:
            - mender-deviceconnect
      volumes:
        - ".:/testing"
      depends_on:
        - mender-mongo
        - mender-nats
      environment:
        DEVICECONNECT_NATS_URL: "nats://mender-nats"

    mmock:
      image: "jordimartin/mmock:v3.0.0"
      networks:
        mender:
          aliases:
            - mmock
            - mender-workflows-server

    mender-mongo:
      image: "mongo:4.4"
      networks:
        mender: {}

    mender-nats:
      image: "nats:2.1-alpine3.11"
      networks:
        mender: {}

networks:
  mender: {}
